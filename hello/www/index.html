<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" href="css/index.css">
        <link rel="stylesheet" href="css/materialize.css">
        <link rel="stylesheet" href="css/mate_icon.css">
        <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <title>Hello World</title>
    </head>
    <body>
       <div id="main_frame">
         <nav>
          <div class="nav-wrapper">
            <a href="#" class="brand-logo"><i class="material-icons">location_on</i></a>
          </div>
         </nav>

         <div id="map">
         </div>
         <div id="send_box">
           <div class="row">
             <div class="col s12 center">
               <a class="waves-effect waves-light btn"><i class="material-icons right">location_on</i>send</a>
             </div>
           </div>
         </div>
       </div>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/materialize.js"></script>

        <script>


        function initMap() {

          // var geocoder = new google.maps.Geocoder;
          // var infowindow = new google.maps.InfoWindow;

            var onSuccess = function(position) {
                // alert('Latitude: '          + position.coords.latitude          + '\n' +
                //       'Longitude: '         + position.coords.longitude         + '\n' +
                //       'Altitude: '          + position.coords.altitude          + '\n' +
                //       'Accuracy: '          + position.coords.accuracy          + '\n' +
                //       'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
                //       'Heading: '           + position.coords.heading           + '\n' +
                //       'Speed: '             + position.coords.speed             + '\n' +
                //       'Timestamp: '         + position.timestamp                + '\n');

                      user_location={lat:  position.coords.latitude, lng: position.coords.longitude};

                      var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 15  ,
                        center: user_location
                      });

                      marker = new google.maps.Marker({
                        map: map,
                        draggable: true,
                        animation: google.maps.Animation.DROP,
                        position: user_location
                      });

                      marker.addListener('click', toggleBounce);


            };

          function onError(error) {
              alert('code: '    + error.code    + '\n' +
                    'message: ' + error.message + '\n');
          }

          navigator.geolocation.getCurrentPosition(onSuccess, onError);

        }

        function toggleBounce() {
          if (marker.getAnimation() !== null) {
            marker.setAnimation(null);
          } else {
            marker.setAnimation(google.maps.Animation.BOUNCE);
          }
        }
        </script>

    </body>
</html>
